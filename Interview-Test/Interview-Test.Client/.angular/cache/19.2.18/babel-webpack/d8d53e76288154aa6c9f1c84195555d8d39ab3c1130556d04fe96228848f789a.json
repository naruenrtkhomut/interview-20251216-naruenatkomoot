{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction UsersListComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 4);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 4);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 4);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 4)(14, \"a\", 5);\n    i0.ɵɵtext(15, \"view\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.userId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", user_r1.userProfile.firstName, \" \", user_r1.userProfile.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.userProfile.age);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.userRoleMappings.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.getPermissionCount(user_r1.userRoleMappings));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/users/\", user_r1.id, \"\", i0.ɵɵsanitizeUrl);\n  }\n}\nexport let UsersListComponent = /*#__PURE__*/(() => {\n  class UsersListComponent {\n    constructor(http) {\n      this.http = http;\n      this.users = [];\n      this.sortUsers = [];\n    }\n    ngOnInit() {\n      this.loadUsers();\n    }\n    loadUsers() {\n      this.http.get(\"https://localhost:44307/api/User/GetUsers\", {\n        headers: {\n          \"x-api-key\": \"A6F9E3C2D7B81F4E0A9C5D6B2E1F8A7C4D0E9B6F5A3C8D2E1B7F9A4C6E0D5B8A1F2C9E7D6B4A3F5E0C8D2\"\n        }\n      }).subscribe(data => {\n        this.users = data;\n        this.sortUsers = this.users;\n      });\n    }\n    getPermissionCount(roles) {\n      return roles.map(role => role.role.permissions.length).reduce((total, n) => total + n, 0);\n    }\n    searchUser(event) {\n      const value = event.target.value.trim();\n      this.sortUsers = value === '' ? this.users : this.users.filter(user => user.id.includes(value) || user.userId.includes(value) || user.username.includes(value) || user.userProfile.firstName.includes(value) || user.userProfile.lastName.includes(value));\n    }\n    static {\n      this.ɵfac = function UsersListComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || UsersListComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UsersListComponent,\n        selectors: [[\"app-users-list\"]],\n        decls: 22,\n        vars: 1,\n        consts: [[\"type\", \"search\", \"name\", \"searchUser\", \"id\", \"searchUser\", \"placeholder\", \"Search by id, userId, username, name\", 2, \"width\", \"50%\", 3, \"input\"], [2, \"width\", \"100%\"], [2, \"text-align\", \"left\"], [4, \"ngFor\", \"ngForOf\"], [2, \"border-bottom\", \"1px solid rgb(231, 228, 228)\"], [3, \"href\"]],\n        template: function UsersListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h1\");\n            i0.ɵɵtext(1, \"Users\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"input\", 0);\n            i0.ɵɵlistener(\"input\", function UsersListComponent_Template_input_input_2_listener($event) {\n              return ctx.searchUser($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"table\", 1)(4, \"thead\")(5, \"tr\", 2)(6, \"th\");\n            i0.ɵɵtext(7, \"UserId\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"th\");\n            i0.ɵɵtext(9, \"Username\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"th\");\n            i0.ɵɵtext(11, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"th\");\n            i0.ɵɵtext(13, \"Age\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"th\");\n            i0.ɵɵtext(15, \"#Roles\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"th\");\n            i0.ɵɵtext(17, \"#Permissions\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"th\");\n            i0.ɵɵtext(19, \"Detail\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(20, \"tbody\");\n            i0.ɵɵtemplate(21, UsersListComponent_tr_21_Template, 16, 9, \"tr\", 3);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(21);\n            i0.ɵɵproperty(\"ngForOf\", ctx.sortUsers);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, FormsModule],\n        encapsulation: 2\n      });\n    }\n  }\n  return UsersListComponent;\n})();","map":{"version":3,"names":["CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","user_r1","userId","username","ɵɵtextInterpolate2","userProfile","firstName","lastName","age","userRoleMappings","length","ctx_r1","getPermissionCount","ɵɵpropertyInterpolate1","id","ɵɵsanitizeUrl","UsersListComponent","constructor","http","users","sortUsers","ngOnInit","loadUsers","get","headers","subscribe","data","roles","map","role","permissions","reduce","total","n","searchUser","event","value","target","trim","filter","user","includes","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","UsersListComponent_Template","rf","ctx","ɵɵlistener","UsersListComponent_Template_input_input_2_listener","$event","ɵɵtemplate","UsersListComponent_tr_21_Template","ɵɵproperty","i2","NgForOf","encapsulation"],"sources":["E:\\Project\\Finkub test\\20251214\\Interview-Test-main\\Interview-Test-main\\Interview-Test\\Interview-Test.Client\\src\\app\\components\\user\\list\\users-list.component.ts","E:\\Project\\Finkub test\\20251214\\Interview-Test-main\\Interview-Test-main\\Interview-Test\\Interview-Test.Client\\src\\app\\components\\user\\list\\users-list.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  standalone: true,\n  selector: 'app-users-list',\n  imports: [CommonModule, FormsModule],\n    templateUrl: './users-list.component.html',\n})\nexport class UsersListComponent {\n  users: User[] = [];\n  sortUsers: User[] = [];\n\n  constructor(private http: HttpClient) {}\n  ngOnInit(): void {\n    this.loadUsers();\n  }\n\n\n  loadUsers(): void {\n    this.http.get<User[]>(\"https://localhost:44307/api/User/GetUsers\", {\n      headers: {\n        \"x-api-key\": \"A6F9E3C2D7B81F4E0A9C5D6B2E1F8A7C4D0E9B6F5A3C8D2E1B7F9A4C6E0D5B8A1F2C9E7D6B4A3F5E0C8D2\"\n      }\n    }).subscribe(data => {\n      this.users = data;\n      this.sortUsers = this.users;\n    });\n  }\n  getPermissionCount(roles: MapRole[]): number {\n    return roles.map(role => role.role.permissions.length).reduce((total, n) => total + n, 0);\n  }\n  searchUser(event: Event): void {\n    const value = (event.target as HTMLInputElement).value.trim();\n    this.sortUsers = value === ''\n    ? this.users\n    : this.users.filter(user => \n      user.id.includes(value)\n      || user.userId.includes(value)\n      || user.username.includes(value)\n      || user.userProfile.firstName.includes(value)\n      || user.userProfile.lastName.includes(value)\n    )\n  }\n}\n\ninterface Permission {\n  permission: string;\n  permissionId: number;\n}\ninterface Role {\n  userRoleMappingId: string;\n  permissions: Permission[];\n  roleId: number;\n  roleName: string;\n}\ninterface MapRole {\n  userRoleMappingId: string;\n  role: Role;\n}\ninterface UserProfile {\n  firstName: string;\n  lastName: string;\n  age: number;\n  profileId: string;\n}\ninterface User {\n  id: string;\n  username: string;\n  userId: string;\n  userProfile: UserProfile;\n  userRoleMappings: MapRole[];\n}","<h1>Users</h1>\r\n<input type=\"search\" name=\"searchUser\" id=\"searchUser\" placeholder=\"Search by id, userId, username, name\" style=\"width: 50%;\" (input)=\"searchUser($event)\">\r\n<table style=\"width: 100%;\">\r\n    <thead >\r\n        <tr style=\"text-align: left;\">\r\n            <th>UserId</th>\r\n            <th>Username</th>\r\n            <th>Name</th>\r\n            <th>Age</th>\r\n            <th>#Roles</th>\r\n            <th>#Permissions</th>\r\n            <th>Detail</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr *ngFor=\"let user of sortUsers\">\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">{{ user.userId }}</td>\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">{{ user.username }}</td>\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">{{ user.userProfile.firstName }} {{ user.userProfile.lastName }}</td>\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">{{ user.userProfile.age }}</td>\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">{{ user.userRoleMappings.length }}</td>\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">{{ getPermissionCount(user.userRoleMappings) }}</td>\r\n            <td style=\"border-bottom: 1px solid rgb(231, 228, 228);\">\r\n                <a href=\"/users/{{user.id}}\">view</a>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}